<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mayank Suman's Blog - Software</title><link href="https://mayanksuman.in/" rel="alternate"></link><link href="https://mayanksuman.in/feeds/software.atom.xml" rel="self"></link><id>https://mayanksuman.in/</id><updated>2021-01-31T00:00:00+05:30</updated><subtitle>Research Scholar, IIT Kharagpur</subtitle><entry><title>Mounting qcow2 drive</title><link href="https://mayanksuman.in/posts/31_Jan_2021_mounting-qcow2-drive/" rel="alternate"></link><published>2021-01-31T00:00:00+05:30</published><updated>2021-01-31T00:00:00+05:30</updated><author><name>Mayank Suman</name></author><id>tag:mayanksuman.in,2021-01-31:/posts/31_Jan_2021_mounting-qcow2-drive/</id><summary type="html">&lt;p&gt;The qcow2 (or &lt;span class="caps"&gt;QEMU&lt;/span&gt; copy-on-write) is a virtual disk image format primarly used by &lt;span class="caps"&gt;QEMU&lt;/span&gt; for guest systems. In many circustances, such as reseting passwords, editting or recovering files etc., mouting a qcow2 disk images without running a guest system is required. This can be acheived by &lt;code&gt;Network Block Device …&lt;/code&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;The qcow2 (or &lt;span class="caps"&gt;QEMU&lt;/span&gt; copy-on-write) is a virtual disk image format primarly used by &lt;span class="caps"&gt;QEMU&lt;/span&gt; for guest systems. In many circustances, such as reseting passwords, editting or recovering files etc., mouting a qcow2 disk images without running a guest system is required. This can be acheived by &lt;code&gt;Network Block Device&lt;/code&gt; module (or &lt;code&gt;nbd&lt;/code&gt;) on host linux system. At first, we need to define maximum number of partitions expected for the qcow2 disk and then the disk can be mouted with following commands:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;modprobe nbd max_part=8   # maximum partition = 8&lt;/span&gt;
&lt;span class="err"&gt;qemu-nbd --connect=/dev/nbd0 /var/lib/vz/images/100/vm-100-disk-1.qcow2&lt;/span&gt;
&lt;span class="err"&gt;fdisk /dev/nbd0 -l  # For finding virtual machine partitions&lt;/span&gt;
&lt;span class="err"&gt;mount /dev/nbd0p1 /mnt/somepoint/    #mount partition on /mnt/somepoint&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;The disk image can be unmounted with following commands:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;umount /mnt/somepoint/&lt;/span&gt;
&lt;span class="err"&gt;qemu-nbd --disconnect /dev/nbd0&lt;/span&gt;
&lt;span class="err"&gt;rmmod nbd&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;Depending upon system configuration, you may need to run either one or all commands as root user.&lt;/p&gt;</content><category term="Software"></category></entry><entry><title>Access data in lvm2 drive</title><link href="https://mayanksuman.in/posts/10_Jan_2021_access-data-in-lvm2-drive/" rel="alternate"></link><published>2021-01-10T00:00:00+05:30</published><updated>2021-01-10T00:00:00+05:30</updated><author><name>Mayank Suman</name></author><id>tag:mayanksuman.in,2021-01-10:/posts/10_Jan_2021_access-data-in-lvm2-drive/</id><summary type="html">&lt;p&gt;Prerequisite: The system should have &lt;code&gt;lvm2&lt;/code&gt; installed. On debian this can be
achieved by &lt;code&gt;sudo apt install lvm2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For mounting a &lt;code&gt;lvm2&lt;/code&gt; drive, we need to activate the associated &lt;span class="caps"&gt;LVM&lt;/span&gt; group. The following command can list all available &lt;span class="caps"&gt;LVM&lt;/span&gt; group:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo vgscan
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;Scanning will show the name of different …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Prerequisite: The system should have &lt;code&gt;lvm2&lt;/code&gt; installed. On debian this can be
achieved by &lt;code&gt;sudo apt install lvm2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For mounting a &lt;code&gt;lvm2&lt;/code&gt; drive, we need to activate the associated &lt;span class="caps"&gt;LVM&lt;/span&gt; group. The following command can list all available &lt;span class="caps"&gt;LVM&lt;/span&gt; group:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo vgscan
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;Scanning will show the name of different &lt;span class="caps"&gt;LVM&lt;/span&gt; volumes. More details about any of
&lt;span class="caps"&gt;LVM&lt;/span&gt; volume can be obtained by &lt;code&gt;vgs&lt;/code&gt; or &lt;code&gt;vgdisplay&lt;/code&gt; commands.
A particular &lt;span class="caps"&gt;LVM&lt;/span&gt; volume can be activated by &lt;code&gt;vgchange&lt;/code&gt; command. Successful
activating of &lt;span class="caps"&gt;LVM&lt;/span&gt; volume with make device files in &lt;code&gt;/dev&lt;/code&gt; for each drive in
the volume.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo vgchange -ay &amp;lt;lvm_volume_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;The required drive can be mounted in any folder by using &lt;code&gt;mount&lt;/code&gt; command.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo mount /dev/&amp;lt;lvm_volume_name&amp;gt;/&amp;lt;lvm_drive_name&amp;gt; target_folder
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;After accessing the required file, the drive can be unmounted by
&lt;code&gt;sudo umount target_folder&lt;/code&gt;. The &lt;span class="caps"&gt;LVM&lt;/span&gt; group is deactivated with
following command:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo vgchange -an
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;&lt;span class="caps"&gt;LVM&lt;/span&gt; group should always be deactivated before removing the concerned removable drive.&lt;/p&gt;</content><category term="Software"></category></entry><entry><title>Setting up droidcam and obs-studio cam in Debian</title><link href="https://mayanksuman.in/posts/30_Jul_2020_setting-up-droidcam-and-obs-studio-cam-in-debian/" rel="alternate"></link><published>2020-07-30T00:00:00+05:30</published><updated>2020-07-30T00:00:00+05:30</updated><author><name>Mayank Suman</name></author><id>tag:mayanksuman.in,2020-07-30:/posts/30_Jul_2020_setting-up-droidcam-and-obs-studio-cam-in-debian/</id><summary type="html">&lt;p&gt;Currently, most of the population is working from home, so having a good video conferencing setup has become important. I have setup droidcam for getting video input from phone/ipad and obs-studio for managing different audio/video source in Debian using the following steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;At first install &lt;code&gt;droidcam&lt;/code&gt; in &lt;span class="caps"&gt;PC …&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;p&gt;Currently, most of the population is working from home, so having a good video conferencing setup has become important. I have setup droidcam for getting video input from phone/ipad and obs-studio for managing different audio/video source in Debian using the following steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;At first install &lt;code&gt;droidcam&lt;/code&gt; in &lt;span class="caps"&gt;PC&lt;/span&gt; using software from &lt;a href="https://www.dev47apps.com/droidcam/linux/"&gt;here&lt;/a&gt;. &lt;code&gt;droidcam&lt;/code&gt; should also be installed on phone/ipad using app store.&lt;/li&gt;
&lt;li&gt;Install obs-studio by the command &lt;code&gt;sudo apt install obs-studio&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;For using the output of obs-studio into video-conferencing software, &lt;code&gt;obs-v4l2sink&lt;/code&gt; should be installed and properly configured.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Install &lt;code&gt;v4l2loopback&lt;/code&gt; kernel module by &lt;code&gt;sudo apt install v4l2loopback-dkms&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install deb file for &lt;code&gt;obs-v4l2sink&lt;/code&gt; downloaded from &lt;a href="https://github.com/CatxFish/obs-v4l2sink/releases"&gt;their release page&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Make a link for &lt;code&gt;obs-v4l2sink&lt;/code&gt; plugin in right folder by &lt;code&gt;sudo ln -s /usr/lib/obs-plugins/v4l2sink.so /usr/lib/x86_64-linux-gnu/obs-plugins/v4l2sink.so&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Open &lt;code&gt;/etc/modprobe.d/droidcam.conf&lt;/code&gt; and edit it so that content looks like&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;options v4l2loopback_dc width=1280 height=720 card_label="Droidcam"&lt;/span&gt;
&lt;span class="err"&gt;options v4l2loopback width=1280 height=720 devices=1 video_nr=10 card_label="obs_studio_cam"  exclusive_caps=1&lt;/span&gt;
&lt;span class="err"&gt;options snd-aloop enable=1,1 index=3,4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;ol start="5"&gt;
&lt;li&gt;Add &lt;code&gt;v4l2loopback&lt;/code&gt; to autoload modules by editing &lt;code&gt;/etc/modules-load.d/droidcam.conf&lt;/code&gt;, so that its content is&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;videodev&lt;/span&gt;
&lt;span class="err"&gt;v4l2loopback_dc&lt;/span&gt;
&lt;span class="err"&gt;v4l2loopback&lt;/span&gt;
&lt;span class="err"&gt;snd-aloop&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;ol start="6"&gt;
&lt;li&gt;Update initramfs by &lt;code&gt;sudo update-initramfs -u&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Reboot the system and enjoy video output from obs-studio in your video conferencing session.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Update (20/04/2021): Camera functionality is now built into &lt;code&gt;obs-studio&lt;/code&gt; 26.1+. Out of box, it works with almost all popular video conferencing systems. However, for &lt;code&gt;skype&lt;/code&gt;, please limit the camera output resolution to 1280x720.&lt;/p&gt;</content><category term="software"></category></entry><entry><title>Setting up Skype for web in Debian</title><link href="https://mayanksuman.in/posts/21_Mar_2020_setting-up-skype-for-web-in-debian/" rel="alternate"></link><published>2020-03-21T00:00:00+05:30</published><updated>2020-03-21T00:00:00+05:30</updated><author><name>Mayank Suman</name></author><id>tag:mayanksuman.in,2020-03-21:/posts/21_Mar_2020_setting-up-skype-for-web-in-debian/</id><summary type="html">&lt;p&gt;I do not prefer having closed source software on my Debian machine.
However, due to the popularity of Skype, the package &lt;code&gt;skypeforlinux&lt;/code&gt; was installed on my Debian system.
Finally, I am able to get rid of the binary blob by using the web version of the service.
If you also …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I do not prefer having closed source software on my Debian machine.
However, due to the popularity of Skype, the package &lt;code&gt;skypeforlinux&lt;/code&gt; was installed on my Debian system.
Finally, I am able to get rid of the binary blob by using the web version of the service.
If you also want to get rid of the binary software and still want to have the convenience offered by it, the steps are listed below:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Get rid of &lt;code&gt;skypeforlinux&lt;/code&gt; package by &lt;code&gt;sudo apt purge skypeforlinux&lt;/code&gt; command.&lt;/li&gt;
&lt;li&gt;Make a text file named &lt;code&gt;skype_web.desktop&lt;/code&gt; in &lt;code&gt;~/.local/share/applications&lt;/code&gt; with following content.&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[Desktop Entry]&lt;/span&gt;
&lt;span class="na"&gt;Name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Skype Web&lt;/span&gt;
&lt;span class="na"&gt;Comment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Skype Web application in a Chrome profile&lt;/span&gt;
&lt;span class="na"&gt;Exec&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;sh -c "mkdir -p $HOME/.local/share/skypeweb &amp;amp;&amp;amp; GDK_BACKEND=x11 chromium --kiosk --user-data-dir=$HOME/.local/share/skypeweb https://web.skype.com 1&amp;gt;/dev/null 2&amp;gt;/dev/null &amp;amp;"&lt;/span&gt;
&lt;span class="na"&gt;Terminal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;false&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Application&lt;/span&gt;
&lt;span class="na"&gt;Encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;UTF-8&lt;/span&gt;
&lt;span class="na"&gt;Categories&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Network;Application;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;ol start="3"&gt;
&lt;li&gt;In the activities panel of gnome-shell, select &lt;code&gt;Skype Web&lt;/code&gt; to start it.&lt;/li&gt;
&lt;li&gt;Login with your credentials and select to remain logged in.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Enjoy Skype from the web interface.
Further, it also frees me from worry that skype might be running in the background.
If chromium is closed, the skype is no longer running.&lt;/p&gt;</content><category term="software"></category></entry></feed>